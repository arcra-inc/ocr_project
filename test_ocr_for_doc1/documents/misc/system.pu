
@startuml OCR_System_Architecture
!theme plain
skinparam backgroundColor white
skinparam componentStyle rectangle

package "OCR Processing System" {
  [main.py] as Main
  [image_loader.py] as ImageLoader
  [preprocess.py] as Preprocessor  
  [ocr_recognizer.py] as OCRRecognizer
  [data_parser.py] as DataParser
  [output_writer.py] as OutputWriter
}

database "Input" {
  [Invoice Images] as InputImages
}

database "Output" {
  [JSON Files] as OutputFiles
}

'cloud "External Dependencies" {
'  [OpenCV] as OpenCV
'  [Tesseract OCR] as Tesseract
'}

InputImages --> Main : "Image Path"
Main --> ImageLoader : "load_image()"
ImageLoader --> Preprocessor : "original_image"
Preprocessor --> OCRRecognizer : "corrected_image"  
OCRRecognizer --> DataParser : "ocr_text"
DataParser --> OutputWriter : "extracted_data"
OutputWriter --> OutputFiles : "JSON file"

'Preprocessor --> OpenCV : "uses"
'OCRRecognizer --> Tesseract : "uses"

'note right of Preprocessor : "Skew correction\nNoise removal\nContrast adjustment"
'note right of OCRRecognizer : "Japanese OCR\nVertical/Horizontal text\nAccuracy optimization"
'note right of DataParser : "Regex field extraction\nData classification\nStructurization"

@enduml

